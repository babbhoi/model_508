<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <title>Hello, world!</title>
    <style type="text/css">
		img.lt{
				-ms-transform: rotate(-45deg); /* IE 9 */
    			-webkit-transform: rotate(-45deg); /* Safari 3-8 */
    			transform: rotate(-45deg);

		}

		img.lb{
				-ms-transform: rotate(45deg); /* IE 9 */
    			-webkit-transform: rotate(45deg); /* Safari 3-8 */
    			transform: rotate(45deg);

		}
		.inv{
			opacity: 0;
		}
		.sideb{
			border-right: 1px solid #ccc;
			border-left: 1px solid #ccc;
		}
		img.cover{

		}
    </style>
  </head>
  <body>
    <h1>Hello, world!</h1>
    <div class="container">
    	<div class="row">
    		<div class="col">
    			<div class="panel panel-default">    
    				<div class="panel-body">
    					Panel Content
    				</div>
  				</div>
    		</div>
    		<div class="col">
    			<div class="panel panel-default">    
    				<div class="panel-body">
    					Panel Content
    				</div>
  				</div>
    		</div>
    		<div class="col">
    			<div class="panel panel-default">    
    				<div class="panel-body">
    					Panel Content
    				</div>
  				</div>
    		</div>
    		<div class="col">
    			<div class="panel panel-default">    
    				<div class="panel-body">
    					Panel Content
    				</div>
  				</div>
    		</div>
    		<div class="col">
    			<div class="panel panel-default">    
    				<div class="panel-body">
    					Panel Content
    				</div>
  				</div>
    		</div>
    		<div class="col">
    			<div class="panel panel-default">    
    				<div class="panel-body">
    					Panel Content
    				</div>
  				</div>
    		</div>

    	</div>

	  <div class="row">

	    <div class="col-sm" id="trc">
	      One of three columns--this will contaain the video section
	    </div>

	    <div class="col-sm sideb">
	      <div class="row align-items-center">
	      	<div class="col-4">
	      		<img src="/client/img/cool.jpg" id="p5" class="img-thumbnail lt" alt="Cinque Terre" width=70% height=auto></img> 

	      		<img src="/client/img/cool.jpg" id="p6" class="img-thumbnail lb" alt="Cinque Terre" width=70% height=auto></img>  

	      	</div>
	      	<div class="col-4">
	      		<img src="/client/img/cool.jpg" id="p4" class="img-thumbnail" alt="Cinque Terre" width=70% height=auto>
		      	<img src="/client/img/cool.jpg" id="p0" class="img-thumbnail inv" alt="Cinque Terre" width=70% height=auto>
		      	<img src="/client/img/cool.jpg" id="p1" class="img-thumbnail" alt="Cinque Terre" width=70% height=auto></img> 
	      	</div>
	      	
	      	<div class="col-4">
	      		<img src="/client/img/cool.jpg" id="p3" class="img-thumbnail lb" alt="Cinque Terre" width=70% height=auto>
		      	<img src="/client/img/cool.jpg" id="p2" class="img-thumbnail lt" alt="Cinque Terre" width=70% height=auto>	      	
	      	</div>
	      </div>
	    </div>

	    <div class="col-sm">
	      	<div class="row">
	      		<div class="col-2" align="center">1</div>
	      		<div class="col-2" align="center">1</div>
	      		<div class="col-2" align="center">1</div>
	      		<div class="col-2" align="center">1</div>
	      		<div class="col-2" align="center">1</div>
	      		<div class="col-2" align="center">1</div>
	      		
	      	</div>
	    </div>

	  </div>
	  <hr>
	  <div class="row">
	  		
	  		
	  				<div class="col-1 offset-md-2"><img src="/client/img/cover.png" id="c1" alt="Cinque Terre" onclick="cardpick(this.id)" width=100% height=auto></div>
	  				<div class="col-1"><img src="/client/img/cover.png" id="c2" alt="Cinque Terre" onclick="cardpick(this.id)" width=100% height=auto></div>
	  				<div class="col-1"><img src="/client/img/cover.png" id="c3" alt="Cinque Terre" onclick="cardpick(this.id)" width=100% height=auto></div>
	  				<div class="col-1"><img src="/client/img/cover.png" id="c4" alt="Cinque Terre" onclick="cardpick(this.id)" width=100% height=auto></div>
	  				<div class="col-1"><img src="/client/img/cover.png" id="c5" alt="Cinque Terre" onclick="cardpick(this.id)" width=100% height=auto></div>
	  				<div class="col-1"><img src="/client/img/cover.png" id="c6" alt="Cinque Terre" onclick="cardpick(this.id)" width=100% height=auto></div>
	  				<div class="col-1"><img src="/client/img/cover.png" id="c7" alt="Cinque Terre" onclick="cardpick(this.id)" width=100% height=auto></div>
	  				<div class="col-1"><img src="/client/img/cover.png" id="c8" alt="Cinque Terre" onclick="cardpick(this.id)" width=100% height=auto></div>
	  				     		
		      		

	  		
	  </div>
	</div>
	<script src="/socket.io/socket.io.js"></script>
		<script>
				var socket=io();
				var id=0;
				var srcs={};
				var ent=false;
				var cards=[];

				socket.on('e',function(data){
					document.body.innerHTML="Server is already full try next time!";         
					
					socket.emit('dummy',{});
					socket.disconnect();
			
				});

				socket.on('success',function(data){
					id=data.uid;
					document.getElementById("trc").innerHTML=id;
					//document.getElementById("my_card").src="/client/img/tonystark.jpg";
				});

				socket.on('plrdy',function(data){
					var count=0;
					for(i in data.players){
						
						if(data.players[i].id==id){
							ent=true;
						}
						if(ent){
							count++;
							srcs[data.players[i].id]="p"+count;
						}
					}

					for(i in data.players){
						count++;
						if(data.players[i].id==id){
							break;
						}
						
						srcs[data.players[i].id]="p"+count;
						
					}
					for(i in data.players){
						document.getElementById("trc").innerHTML+="<br>"+data.players[i].id+": "+data.players[i].n;

						//document.getElementById(srcs[data.players[i].id]).src="/client/img/ser/card ("+data.players[i].n+").png";
					}

						cards=Array.from(data.cards);
						cards.sort(function(a, b){return a - b});
						var i;
					for (i = 0; i <cards.length; i++) { 
						document.getElementById("c"+(i+1)).src="/client/img/ser/card ("+cards[i]+").png";	
					}
				});

				socket.on('splayed',function(data){
						console.log(data);
						document.getElementById(srcs[data.pid]).src="/client/img/ser/card ("+data.card_n+").png";
					
				})

				


				
		</script>

    <!-- Optional JavaScript -->
    <script type="text/javascript">

    	


    	function cardpick(card_id) {
    		//$("#imageID").attr('src', 'srcImage.jpg');
    		//document.getElementById(card_id).src="tonystark.jpg";
    		var element = document.getElementById(card_id);
			element.style.opacity = "0.2";
			element.style.filter  = 'alpha(opacity=20)'; // IE fallback
			var n=parseInt(card_id.charAt(1));
			console.log(n);
			//console.log(id);

    		document.getElementById("p1").src="/client/img/ser/card ("+cards[n-1]+").png";

    		socket.emit('played',{
    		pid:id,	
    		card_n:cards[n-1]  
    		});
			console.log("kjgjvo");
			//for assigning table card view

			//alert(card_id); 
					
		}

		

		



    </script>
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  </body>
</html>